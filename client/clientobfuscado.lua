ESX=nil;local a=-69;Citizen.CreateThread(function()while ESX==nil do TriggerEvent('esx:getSharedObject',function(b)ESX=b end)Citizen.Wait(100)end;while ESX.GetPlayerData().job==nil do Citizen.Wait(100)end;ESX.PlayerData=ESX.GetPlayerData()OnStart(ESX.PlayerData)end)local c={["ESC"]=322,["F1"]=288,["F2"]=289,["F3"]=170,["F5"]=166,["F6"]=167,["F7"]=168,["F8"]=169,["F9"]=56,["F10"]=57,["~"]=243,["1"]=157,["2"]=158,["3"]=160,["4"]=164,["5"]=165,["6"]=159,["7"]=161,["8"]=162,["9"]=163,["-"]=84,["="]=83,["BACKSPACE"]=177,["TAB"]=37,["Q"]=44,["W"]=32,["E"]=38,["R"]=45,["T"]=245,["Y"]=246,["U"]=303,["P"]=199,["["]=39,["]"]=40,["ENTER"]=18,["CAPS"]=137,["A"]=34,["S"]=8,["D"]=9,["F"]=23,["G"]=47,["H"]=74,["K"]=311,["L"]=182,["LEFTSHIFT"]=21,["Z"]=20,["X"]=73,["C"]=26,["V"]=0,["B"]=29,["N"]=249,["M"]=244,[","]=82,["."]=81,["LEFTCTRL"]=36,["LEFTALT"]=19,["SPACE"]=22,["RIGHTCTRL"]=70,["HOME"]=213,["PAGEUP"]=10,["PAGEDOWN"]=11,["DELETE"]=178,["LEFT"]=174,["RIGHT"]=175,["TOP"]=27,["DOWN"]=173,["NENTER"]=201,["N4"]=108,["N5"]=60,["N6"]=107,["N+"]=96,["N-"]=97,["N7"]=117,["N8"]=61,["N9"]=118}local d=json.decode('{"melee":{"dagger":"0x92A27487","bat":"0x958A4A8F","bottle":"0xF9E6AA4B","crowbar":"0x84BD7BFD","unarmed":"0xA2719263","flashlight":"0x8BB05FD7","golfclub":"0x440E4788","hammer":"0x4E875F73","hatchet":"0xF9DCBF2D","knuckle":"0xD8DF3C3C","knife":"0x99B507EA","machete":"0xDD5DF8D9","switchblade":"0xDFE37640","nightstick":"0x678B81B1","wrench":"0x19044EE0","battleaxe":"0xCD274149","poolcue":"0x94117305","stone_hatchet":"0x3813FC08"},"handguns":{"pistol":"0x1B06D571","pistol_mk2":"0xBFE256D4","combatpistol":"0x5EF9FEC4","appistol":"0x22D8FE39","stungun":"0x3656C8C1","pistol50":"0x99AEEB3B","snspistol":"0xBFD21232","snspistol_mk2":"0x88374054","heavypistol":"0xD205520E","vintagepistol":"0x83839C4","flaregun":"0x47757124","marksmanpistol":"0xDC4DB296","revolver":"0xC1B3C3D1","revolver_mk2":"0xCB96392F","doubleaction":"0x97EA20B8","raypistol":"0xAF3696A1"},"smg":{"microsmg":"0x13532244","smg":"0x2BE6766B","smg_mk2":"0x78A97CD0","assaultsmg":"0xEFE7E2DF","combatpdw":"0xA3D4D34","machinepistol":"0xDB1AA450","minismg":"0xBD248B55","raycarbine":"0x476BF155"},"shotguns":{"pumpshotgun":"0x1D073A89","pumpshotgun_mk2":"0x555AF99A","sawnoffshotgun":"0x7846A318","assaultshotgun":"0xE284C527","bullpupshotgun":"0x9D61E50F","musket":"0xA89CB99E","heavyshotgun":"0x3AABBBAA","dbshotgun":"0xEF951FBB","autoshotgun":"0x12E82D3D"},"assault_rifles":{"assaultrifle":"0xBFEFFF6D","assaultrifle_mk2":"0x394F415C","carbinerifle":"0x83BF0278","carbinerifle_mk2":"0xFAD1F1C9","advancedrifle":"0xAF113F99","specialcarbine":"0xC0A3098D","specialcarbine_mk2":"0x969C3D67","bullpuprifle":"0x7F229F94","bullpuprifle_mk2":"0x84D6FAFD","compactrifle":"0x624FE830"},"machine_guns":{"mg":"0x9D07F764","combatmg":"0x7FD62962","combatmg_mk2":"0xDBBD7280","gusenberg":"0x61012683"},"sniper_rifles":{"sniperrifle":"0x5FC3C11","heavysniper":"0xC472FE2","heavysniper_mk2":"0xA914799","marksmanrifle":"0xC734385A","marksmanrifle_mk2":"0x6A6C02E0"},"heavy_weapons":{"rpg":"0xB1CA77B1","grenadelauncher":"0xA284510B","grenadelauncher_smoke":"0x4DD2DC56","minigun":"0x42BF8A85","firework":"0x7F7497E5","railgun":"0x6D544C99","hominglauncher":"0x63AB0442","compactlauncher":"0x781FE4A","rayminigun":"0xB62D1F67"},"throwables":{"grenade":"0x93E220BD","bzgas":"0xA0973D5E","smokegrenade":"0xFDBC8A50","flare":"0x497FACC3","molotov":"0x24B17070","stickybomb":"0x2C3731D9","proxmine":"0xAB564B93","snowball":"0x787F0BB","pipebomb":"0xBA45E8B8","ball":"0x23C9F95C"},"misc":{"petrolcan":"0x34A67B97","fireextinguisher":"0x60EC506","parachute":"0xFBAB5776"}}')local e={0,1,2,3,4,5,6,7,8,9,10,11,12,17,18,19,20}Citizen.CreateThread(function()local f=false;while true do Citizen.Wait(0)if IsPauseMenuActive()then if not f then f=not f;SendNUIMessage({action='toggleUi',value=false})end else if f then f=not f;SendNUIMessage({action='toggleUi',value=true})end;HideHudComponentThisFrame(1)HideHudComponentThisFrame(2)HideHudComponentThisFrame(3)HideHudComponentThisFrame(4)HideHudComponentThisFrame(6)HideHudComponentThisFrame(7)HideHudComponentThisFrame(8)HideHudComponentThisFrame(9)HideHudComponentThisFrame(13)HideHudComponentThisFrame(17)HideHudComponentThisFrame(20)end end end)Citizen.CreateThread(function()local g=GetPlayerServerId(NetworkGetEntityOwner(GetPlayerPed(-1)))while true do Citizen.Wait(1000)SendNUIMessage({action='setText',id='userID',value='ID: '..g})end end)local h;local i='off'local j=45.0;local k=100.0;local l=false;local m=0.0;local n={x=0.0,y=0.0,z=0.0}Citizen.CreateThread(function()while true do Citizen.Wait(100)local o=PlayerPedId()local p=GetVehiclePedIsIn(o,false)local q=GetEntityCoords(o)local r=GetIsVehicleEngineRunning(p)local vehicleInfo;if IsPedInAnyVehicle(o,false)and r then local s=GetVehicleClass(p)if Config.ui.showMinimap==false then DisplayRadar(true)end;local t=GetEntitySpeed(p)local u;if Config.vehicle.speedUnit=='MPH'then u=math.ceil(t*2.237)else u=math.ceil(t*3.6)end;local vehicleNailSpeed;if u>Config.vehicle.maxSpeed then vehicleNailSpeed=math.ceil(280-math.ceil(math.ceil(Config.vehicle.maxSpeed*205)/Config.vehicle.maxSpeed))else vehicleNailSpeed=math.ceil(280-math.ceil(math.ceil(u*205)/Config.vehicle.maxSpeed))end;local v;v=GetVehicleFuelLevel(p)local w=GetVehicleCurrentGear(p)if a==-69 then if u==0 and w==0 or u==0 and w==1 then w='N'elseif u>0 and w==0 then w='R'end end;local x,y,z=GetVehicleLightsState(p)local A;if y==1 and z==0 then A='normal'elseif y==1 and z==1 or y==0 and z==1 then A='high'else A='off'end;local B;if IsVehicleSirenOn(p)then B=true else B=false end;if has_value(e,s)==true and s~=8 then local C=m;m=t;SetPedConfigFlag(PlayerPedId(),32,true)if not l then local D=GetEntitySpeedVector(p,true).y>1.0;local E=(C-m)/GetFrameTime()if D and C>j/2.237 and E>k*9.81 then SetEntityCoords(o,q.x,q.y,q.z-0.47,true,true,true)SetEntityVelocity(o,n.x,n.y,n.z)SetPedToRagdoll(o,1000,1000,0,0,0,0)else n=GetEntityVelocity(p)end else DisableControlAction(0,75)end end;if a==-69 then vehicleInfo={action='updateVehicle',status=true,speed=u,nail=vehicleNailSpeed,gear=w,fuel=v,lights=A,signals=i,cruiser=h,type=s,siren=B,seatbelt={},config={speedUnit=Config.vehicle.speedUnit,maxSpeed=Config.vehicle.maxSpeed}}else vehicleInfo={action='updateVehicle',status=true,speed=u,nail=vehicleNailSpeed,gear=a,fuel=v,lights=A,signals=i,cruiser=h,type=s,siren=B,seatbelt={},config={speedUnit=Config.vehicle.speedUnit,maxSpeed=Config.vehicle.maxSpeed}}end;vehicleInfo['seatbelt']['status']=l else h=false;vehicleNailSpeed=0;i='off'l=false;vehicleInfo={action='updateVehicle',status=false,nail=vehicleNailSpeed,seatbelt={status=l},cruiser=h,signals=i,type=0}if Config.ui.showMinimap==false then DisplayRadar(false)end end;SendNUIMessage(vehicleInfo)end end)Citizen.CreateThread(function()while true do Citizen.Wait(1000)local F;local G=0;F={action='setStatus',status={}}if Config.ui.showHealth==true then G=G+1;F['isdead']=false;F['status'][G]={name='health',value=GetEntityHealth(GetPlayerPed(-1))-100}if IsEntityDead(GetPlayerPed(-1))then F.isdead=true end end;if Config.ui.showArmor==true then G=G+1;F['status'][G]={name='armor',value=GetPedArmour(GetPlayerPed(-1))}end;if Config.ui.showStamina==true then G=G+1;F['status'][G]={name='stamina',value=100-GetPlayerSprintStaminaRemaining(PlayerId())}end;if G>0 then SendNUIMessage(F)end end end)RegisterNetEvent("es:activateMoney")AddEventHandler('es:activateMoney',function(H)SendNUIMessage({action='setMoney',id='wallet',value=H})end)RegisterNetEvent("esx:setAccountMoney")AddEventHandler('esx:setAccountMoney',function(account)if account.name=="money"then SendNUIMessage({action='setMoney',id='wallet',value=account.money})elseif account.name=="bank"then SendNUIMessage({action='setMoney',id='bank',value=account.money})elseif account.name=="black_money"then SendNUIMessage({action='setMoney',id='blackMoney',value=account.money})end end)RegisterNetEvent("esx:setJob")AddEventHandler('esx:setJob',function(I)SetJob(I)end)AddEventHandler('esx_status:onTick',function(J)if J==nil then return end;local K={action='setStatus',status={}}local L=0;for M,N in pairs(J)do if N.name=='hunger'then L=L+1;K['status'][L]={name='hunger',value=math.floor(100-N.percent)}elseif N.name=='thirst'then L=L+1;K['status'][L]={name='thirst',value=math.floor(100-N.percent)}end end;if L>0 then SendNUIMessage(K)end end)Citizen.CreateThread(function()if Config.ui.showVoice==true then local O=false;local P=nil;while true do Citizen.Wait(1)if NetworkIsPlayerTalking(PlayerId())and not O then O=not O;SendNUIMessage({action='isTalking',value=O})elseif not NetworkIsPlayerTalking(PlayerId())and O then O=not O;SendNUIMessage({action='isTalking',value=O})end;if IsControlJustPressed(1,c['H'])then Config.voice.levels.current=(Config.voice.levels.current+1)%3;if Config.voice.levels.current==0 then P='normal'elseif Config.voice.levels.current==1 then P='shout'elseif Config.voice.levels.current==2 then P='whisper'end;SendNUIMessage({action='setVoiceDistance',value=P})end;if Config.voice.levels.current==0 then P='normal'elseif Config.voice.levels.current==1 then P='shout'elseif Config.voice.levels.current==2 then P='whisper'end end end end)Citizen.CreateThread(function()if Config.ui.showWeapons==true then while true do Citizen.Wait(1000)local o=GetPlayerPed(-1)local Q={}if IsPedArmed(o,7)then local R=GetSelectedPedWeapon(o)local S=GetAmmoInPedWeapon(o,R)local T,U=GetAmmoInClip(o,R)local V=math.floor(S-U)Q['armed']=true;for W,X in pairs(d)do for Y,Z in pairs(d[W])do if R==GetHashKey('weapon_'..Y)then Q['weapon']=Y;if W=='melee'then SendNUIMessage({action='element',task='disable',value='weapon_bullets'})SendNUIMessage({action='element',task='disable',value='bullets'})else if Y=='stungun'then SendNUIMessage({action='element',task='disable',value='weapon_bullets'})SendNUIMessage({action='element',task='disable',value='bullets'})else SendNUIMessage({action='element',task='enable',value='weapon_bullets'})SendNUIMessage({action='element',task='enable',value='bullets'})end end end end end;SendNUIMessage({action='setText',id='weapon_clip',value=U})SendNUIMessage({action='setText',id='weapon_ammo',value=V})else Q['armed']=false end;SendNUIMessage({action='updateWeapon',status=Q})end end end)Citizen.CreateThread(function()while true do Citizen.Wait(0)local o=GetPlayerPed(-1)local p=GetVehiclePedIsIn(o,false)local s=GetVehicleClass(p)if IsPedInAnyVehicle(o,false)and GetIsVehicleEngineRunning(p)then if IsControlJustReleased(0,c[Config.vehicle.keys.seatbelt])and(has_value(e,s)==true and s~=8)then l=not l end end;if IsControlJustPressed(1,c[Config.vehicle.keys.cruiser])and GetPedInVehicleSeat(p,-1)==o and has_value(e,s)==true then local t=GetEntitySpeed(p)if h=='on'then h='off'SetEntityMaxSpeed(p,GetVehicleHandlingFloat(p,"CHandlingData","fInitialDriveMaxFlatVel"))else h='on'SetEntityMaxSpeed(p,t)end end end end)AddEventHandler('onClientMapStart',function()SendNUIMessage({action='ui',config=Config.ui})SendNUIMessage({action='setFont',url=Config.font.url,name=Config.font.name})SendNUIMessage({action='setLogo',value=Config.serverLogo})end)AddEventHandler('playerSpawned',function()HideHudComponentThisFrame(7)HideHudComponentThisFrame(9)HideHudComponentThisFrame(6)HideHudComponentThisFrame(3)HideHudComponentThisFrame(4)HideHudComponentThisFrame(13)SetJob(ESX.PlayerData.job)end)function has_value(_,a0)for a1,X in ipairs(_)do if X==a0 then return true end end;return false end;local a2=false;RegisterCommand('hud',function()if not a2 then SendNUIMessage({action='element',task='disable',value='job'})SendNUIMessage({action='element',task='disable',value='society'})SendNUIMessage({action='element',task='disable',value='bank'})SendNUIMessage({action='element',task='disable',value='blackMoney'})SendNUIMessage({action='element',task='disable',value='wallet'})SendNUIMessage({action='element',task='disable',value='zafiro'})SendNUIMessage({action='element',task='disable',value='userID'})else if Config.ui.showJob==true then SendNUIMessage({action='element',task='enable',value='job'})end;if Config.ui.showSocietyMoney==true then SendNUIMessage({action='element',task='enable',value='society'})end;if Config.ui.showBankMoney==true then SendNUIMessage({action='element',task='enable',value='bank'})end;if Config.ui.showZafiro==true then SendNUIMessage({action='element',task='enable',value='zafiro'})end;if Config.ui.showBlackMoney==true then SendNUIMessage({action='element',task='enable',value='blackMoney'})end;if Config.ui.showWalletMoney==true then SendNUIMessage({action='element',task='enable',value='wallet'})end;if Config.ui.showHealth==true then SendNUIMessage({action='element',task='enable',value='health'})end;if Config.ui.showArmor==true then SendNUIMessage({action='element',task='enable',value='armor'})end;if Config.ui.showStamina==true then SendNUIMessage({action='element',task='enable',value='stamina'})end;if Config.ui.showHunger==true then SendNUIMessage({action='element',task='enable',value='hunger'})end;if Config.ui.showThirst==true then SendNUIMessage({action='element',task='enable',value='thirst'})end;if Config.ui.showVoice==true then SendNUIMessage({action='element',task='enable',value='voice'})end;if Config.ui.showPlayerID==true then SendNUIMessage({action='element',task='enable',value='userID'})end end;a2=not a2 end)RegisterNetEvent("SaljiGear")AddEventHandler("SaljiGear",function(a3)a=a3;vehicleInfo={action='updateVehicle',status=true,gear=a3}SendNUIMessage(vehicleInfo)end)RegisterNetEvent('esx_addonaccount:setMoney')AddEventHandler('esx_addonaccount:setMoney',function(a4,a5)while ESX==nil do Wait(250)end;if ESX.PlayerData.job and ESX.PlayerData.job.grade_name=='boss'and'society_'..ESX.PlayerData.job.name==a4 then SendNUIMessage({action='setMoney',id='society',value=a5})end end)exports('createStatus',function(a6)local a7={action='createStatus',status=a6['status'],color=a6['color'],icon=a6['icon']}SendNUIMessage(a7)end)exports('setStatus',function(a6)local F={action='setStatus',status={{name=a6['name'],value=a6['value']}}}SendNUIMessage(F)end)function SetJob(I)if I~=nil then if ESX==nil then ESX={}end;if ESX.PlayerData==nil then ESX.PlayerData={}end;ESX.PlayerData.job=I;local a8=""if I.label==I.grade_label then a8=I.grade_label else a8=I.label..': '..I.grade_label end;if Config.ui.showSocietyMoney==true then if I.grade_name~=nil and I.grade_name=='boss'then SendNUIMessage({action='element',task='enable',value='society'})ESX.TriggerServerCallback('esx_society:getSocietyMoney',function(a9)SendNUIMessage({action='setMoney',id='society',value=a9})end,I.name)else SendNUIMessage({action='element',task='disable',value='society'})end end;SendNUIMessage({action='setText',id='job',value=a8})end end;function OnStart(aa)SendNUIMessage({action='element',task='disable',value='society'})SendNUIMessage({action='ui',config=Config.ui})SendNUIMessage({action='setFont',url=Config.font.url,name=Config.font.name})SendNUIMessage({action='setLogo',value=Config.serverLogo})HideHudComponentThisFrame(7)HideHudComponentThisFrame(9)HideHudComponentThisFrame(6)HideHudComponentThisFrame(3)HideHudComponentThisFrame(4)HideHudComponentThisFrame(13)SendNUIMessage({action='setMoney',id='wallet',value=aa.money})for ab,N in pairs(aa.accounts)do if N.name=="money"then SendNUIMessage({action='setMoney',id='wallet',value=N.money})elseif N.name=="bank"then SendNUIMessage({action='setMoney',id='bank',value=N.money})elseif N.name=="black_money"then SendNUIMessage({action='setMoney',id='blackMoney',value=N.money})elseif account.name=="zafiro"then SendNUIMessage({action='setMoney',id='zafiro',value=account.money})end end;local I=aa.job;SetJob(I)end